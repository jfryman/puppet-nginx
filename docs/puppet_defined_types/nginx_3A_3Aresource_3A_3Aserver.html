<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Defined Type: nginx::resource::server
  
    &mdash; Documentation by YARD 0.9.10
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "puppet_defined_types::nginx::resource::server";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../puppet_defined_type_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (n)</a> &raquo;
    <span class='title'><span class='object_link'>Defined Types</span></span>
     &raquo; 
    <span class="title">nginx::resource::server</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="../puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Defined Type: nginx::resource::server</h1>
<div class="box_info">
  <dl>
    <dt>Defined in:</dt>
    <dd>
      manifests/resource/server.pp
    </dd>
  </dl>
</div>

<h2>Overview</h2>
<div class="docstring">
  <div class="discussion">
    <p>define: nginx::resource::server</p>

<p>This definition creates a virtual host</p>

<p>Parameters:
  [<em>ensure</em>]                     - Enables or disables the specified server (present|absent)
  [<em>listen_ip</em>]                  - Default IP Address for NGINX to listen with this server on. Defaults to all interfaces (<em>)
  [*listen_port</em>]                - Default IP Port for NGINX to listen with this server on. Defaults to TCP 80
  [<em>listen_options</em>]             - Extra options for listen directive like &#39;default_server&#39; to catchall. Undef by default.
  [<em>listen_unix_socket_enable</em>]  - BOOL value to enable/disable UNIX socket listening support (false|true).
  [<em>listen_unix_socket</em>]         - Default unix socket for NGINX to listen with this server on. Defaults to UNIX /var/run/nginx.sock
  [<em>listen_unix_socket_options</em>] - Extra options for listen directive like &#39;default&#39; to catchall. Undef by default.
  [<em>location_satisfy</em>]           - Allows access if all (all) or at least one (any) of the auth modules allow access.
  [<em>location_allow</em>]             - Array: Locations to allow connections from.
  [<em>location_deny</em>]              - Array: Locations to deny connections from.
  [<em>ipv6_enable</em>]                - BOOL value to enable/disable IPv6 support (false|true). Module will check to see if IPv6 support
    exists on your system before enabling.
  [<em>ipv6_listen_ip</em>]             - Default IPv6 Address for NGINX to listen with this server on. Defaults to all interfaces (::)
  [<em>ipv6_listen_port</em>]           - Default IPv6 Port for NGINX to listen with this server on. Defaults to TCP 80
  [<em>ipv6_listen_options</em>]        - Extra options for listen directive like &#39;default&#39; to catchall. Template will allways add ipv6only=on.
    While issue jfryman/puppet-nginx#30 is discussed, default value is &#39;default&#39;.
  [<em>add_header</em>]                 - Hash: Adds headers to the HTTP response when response code is equal to 200, 204, 301, 302 or 304.
  [<em>index_files</em>]                - Default index files for NGINX to read when traversing a directory
  [<em>autoindex</em>]                  - Set it on &#39;on&#39; or &#39;off &#39;to activate/deactivate autoindex directory listing. Undef by default.
  [<em>proxy</em>]                      - Proxy server(s) for the root location to connect to.  Accepts a single value, can be used in
    conjunction with nginx::resource::upstream
  [<em>proxy_read_timeout</em>]         - Override the default the proxy read timeout value of 90 seconds
  [<em>proxy_redirect</em>]             - Override the default proxy_redirect value of off.
  [<em>proxy_buffering</em>]            - If defined, sets the proxy_buffering to the passed value.
  [<em>resolver</em>]                   - Array: Configures name servers used to resolve names of upstream servers into addresses.
  [<em>fastcgi</em>]                    - location of fastcgi (host:port)
  [<em>fastcgi_param</em>]              - Set additional custom fastcgi_params
  [<em>fastcgi_params</em>]             - optional alternative fastcgi_params file to use
  [<em>fastcgi_index</em>]              - optional FastCGI index page
  [<em>fastcgi_script</em>]             - optional SCRIPT_FILE parameter
  [<em>uwsgi_read_timeout</em>]         - optional value for uwsgi_read_timeout
  [<em>ssl</em>]                        - Indicates whether to setup SSL bindings for this server.
  [<em>ssl_cert</em>]                   - Pre-generated SSL Certificate file to reference for SSL Support. This is not generated by this module.
    Set to <code>false</code> to inherit from the http section, which improves performance by conserving memory.
  [<em>ssl_client_cert</em>]            - Pre-generated SSL Certificate file to reference for client verify SSL Support. This is not generated by
    this module.
  [<em>ssl_verify_client</em>]          - Enables verification of client certificates.
  [<em>ssl_crl</em>]                    - String: Specifies CRL path in file system
  [<em>ssl_dhparam</em>]                - This directive specifies a file containing Diffie-Hellman key agreement protocol cryptographic
    parameters, in PEM format, utilized for exchanging session keys between server and client. Defaults to nginx::ssl_dhparam
  [<em>ssl_prefer_server_ciphers</em>]  - String: Specifies that server ciphers should be preferred over client ciphers when using the SSLv3 and
    TLS protocols. Defaults to nginx::ssl_prefer_server_ciphers.
  [<em>ssl_redirect</em>]               - Adds a server directive and return statement to force ssl redirect. Will honor ssl_port if it&#39;s set.
  [<em>ssl_redirect_port</em>]          - Overrides $ssl_port in the SSL redirect set by ssl_redirect
  [<em>ssl_key</em>]                    - Pre-generated SSL Key file to reference for SSL Support. This is not generated by this module. Set to
    <code>false</code> to inherit from the http section, which improves performance by conserving memory.
  [<em>ssl_port</em>]                   - Default IP Port for NGINX to listen with this SSL server on. Defaults to TCP 443
  [<em>ssl_protocols</em>]              - SSL protocols enabled. Defaults to &#39;TLSv1 TLSv1.1 TLSv1.2&#39;.
  [<em>ssl_buffer_size</em>]            - Sets the size of the buffer used for sending data.
  [<em>ssl_ciphers</em>]                - SSL ciphers enabled. Defaults to nginx::ssl_ciphers
  [<em>ssl_stapling</em>]               - Bool: Enables or disables stapling of OCSP responses by the server. Defaults to false.
  [<em>ssl_stapling_file</em>]          - String: When set, the stapled OCSP response will be taken from the specified file instead of querying
    the OCSP responder specified in the server certificate.
  [<em>ssl_stapling_responder</em>]     - String: Overrides the URL of the OCSP responder specified in the Authority Information Access
    certificate extension.
  [<em>ssl_stapling_verify</em>]        - Bool: Enables or disables verification of OCSP responses by the server. Defaults to false.
  [<em>ssl_session_timeout</em>]        - String: Specifies a time during which a client may reuse the session parameters stored in a cache.
    Defaults to 5m.
  [<em>ssl_session_tickets</em>]        - String: Enables or disables session resumption through TLS session tickets.
  [<em>ssl_session_ticket_key</em>]     - String: Sets a file with the secret key used to encrypt and decrypt TLS session tickets.
  [<em>ssl_trusted_cert</em>]           - String: Specifies a file with trusted CA certificates in the PEM format used to verify client
    certificates and OCSP responses if ssl_stapling is enabled.
  [<em>spdy</em>]                       - Toggles SPDY protocol.
  [<em>http2</em>]                      - Toggles HTTP/2 protocol.
  [<em>server_name</em>]                - List of servernames for which this server will respond. Default [$name].
  [<em>www_root</em>]                   - Specifies the location on disk for files to be read from. Cannot be set in conjunction with $proxy
  [<em>rewrite_www_to_non_www</em>]     - Adds a server directive and rewrite rule to rewrite <a href="http://www.domain.com">www.domain.com</a> to domain.com in order to avoid
    duplicate content (SEO);
  [<em>try_files</em>]                  - Specifies the locations for files to be checked as an array. Cannot be used in conjuction with $proxy.
  [<em>proxy_cache</em>]                - This directive sets name of zone for caching. The same zone can be used in multiple places.
  [<em>proxy_cache_key</em>]            - Override the default proxy_cache_key of $scheme$proxy_host$request_uri
  [<em>proxy_cache_use_stale</em>]      - Override the default proxy_cache_use_stale value of off.
  [<em>proxy_cache_valid</em>]          - This directive sets the time for caching different replies.
  [<em>proxy_cache_lock</em>]           - This directive sets the locking mechanism for pouplating cache.
  [<em>proxy_cache_bypass</em>]         - Defines conditions which the response will not be cached
  [<em>proxy_method</em>]               - If defined, overrides the HTTP method of the request to be passed to the backend.
  [<em>proxy_http_version</em>]         - Sets the proxy http version
  [<em>proxy_set_body</em>]             - If defined, sets the body passed to the backend.
  [<em>auth_basic</em>]                 - This directive includes testing name and password with HTTP Basic Authentication.
  [<em>auth_basic_user_file</em>]       - This directive sets the htpasswd filename for the authentication realm.
  [<em>auth_request</em>]               - This allows you to specify a custom auth endpoint
  [<em>client_max_body_size</em>]       - This directive sets client_max_body_size.
  [<em>client_body_timeout</em>]        - Sets how long the server will wait for a client body. Default is 60s
  [<em>client_header_timeout</em>]      - Sets how long the server will wait for a client header. Default is 60s
  [<em>raw_prepend</em>]                - A single string, or an array of strings to prepend to the server directive (after cfg prepend
  directives). NOTE: YOU are responsible for a semicolon on each line that requires one.
  [<em>raw_append</em>]                 - A single string, or an array of strings to append to the server directive (after cfg append
    directives). NOTE: YOU are responsible for a semicolon on each line that requires one.
  [<em>location_raw_prepend</em>]       - A single string, or an array of strings to prepend to the location directive (after custom_cfg
    directives). NOTE: YOU are responsible for a semicolon on each line that requires one.
  [<em>location_raw_append</em>]        - A single string, or an array of strings to append to the location directive (after custom_cfg
    directives). NOTE: YOU are responsible for a semicolon on each line that requires one.
  [<em>server_cfg_append</em>]          - It expects a hash with custom directives to put after everything else inside server
  [<em>server_cfg_prepend</em>]         - It expects a hash with custom directives to put before everything else inside server
  [<em>server_cfg_ssl_append</em>]      - It expects a hash with custom directives to put after everything else inside server ssl
  [<em>server_cfg_ssl_prepend</em>]     - It expects a hash with custom directives to put before everything else inside server ssl
  [<em>include_files</em>]              - Adds include files to server
  [<em>access_log</em>]                 - Where to write access log (log format can be set with $format_log). This can be either a string or an
    array; in the latter case, multiple lines will be created. Additionally, unlike the earlier behavior, setting it to &#39;absent&#39; in the
    server context will remove this directive entirely from the server stanza, rather than setting a default. Can also be disabled for
    this server with the string &#39;off&#39;.
  [<em>error_log</em>]                  - Where to write error log. May add additional options like error level to the end. May set to &#39;absent&#39;,
    in which case it will be omitted in this server stanza (and default to nginx.conf setting)
  [<em>passenger_cgi_param</em>]        - Allows one to define additional CGI environment variables to pass to the backend application
  [<em>passenger_set_header</em>]       - Allows one to set headers to pass to the backend application (Passenger 5.0+)
  [<em>passenger_env_var</em>]          - Allows one to set environemnt variables to pass to the backend application (Passenger 5.0+)
  [<em>passenger_pre_start</em>]        - Allows setting a URL to pre-warm the host. Per Passenger docs, the &quot;domain part of the URL&quot; must match
    a value of server_name. If this is an array, multiple URLs can be specified.
  [<em>log_by_lua</em>]                 - Run the Lua source code inlined as the <lua-script-str> at the log request processing phase. This does
    not replace the current access logs, but runs after.
  [<em>log_by_lua_file</em>]            - Equivalent to log_by_lua, except that the file specified by <path-to-lua-script-file> contains the Lua
    code, or, as from the v0.5.0rc32 release, the Lua/LuaJIT bytecode to be executed.
  [<em>gzip_types</em>]                 - Defines gzip_types, nginx default is text/html
  [<em>owner</em>]                      - Defines owner of the .conf file
  [<em>group</em>]                      - Defines group of the .conf file
  [<em>mode</em>]                       - Defines mode of the .conf file
  [<em>maintenance</em>]                - A boolean value to set a server in maintenance
  [<em>maintenance_value</em>]          - Value to return when maintenance is on.  Default to return 503
  [<em>error_pages</em>]                - Hash: setup errors pages, hash key is the http code and hash value the page
  [<em>locations</em>]                  - Hash of servers resources used by this server
  [<em>locations_defaults</em>]         - Hash of location default settings
Actions:</p>

<p>Requires:</p>

<p>Sample Usage:
 nginx::resource::server { &#39;test2.local&#39;:
   ensure   =&gt; present,
   www_root =&gt; &#39;/var/www/nginx-default&#39;,
   ssl      =&gt; true,
   ssl_cert =&gt; &#39;/tmp/server.crt&#39;,
   ssl_key  =&gt; &#39;/tmp/server.pem&#39;,
 }</p>

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>ensure</span>
      
      
        <span class='type'>(<tt>Enum['absent', 'present']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;present&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>listen_ip</span>
      
      
        <span class='type'>(<tt>Variant[Array, String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;*&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>listen_port</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>80</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>listen_options</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>listen_unix_socket_enable</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>listen_unix_socket</span>
      
      
        <span class='type'>(<tt>Variant[Array[Stdlib::Absolutepath], Stdlib::Absolutepath]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;/var/run/nginx.sock&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>listen_unix_socket_options</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_satisfy</span>
      
      
        <span class='type'>(<tt>Optional[Enum['any', 'all']]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_allow</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_deny</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ipv6_enable</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ipv6_listen_ip</span>
      
      
        <span class='type'>(<tt>Variant[Array, String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;::&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ipv6_listen_port</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>80</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ipv6_listen_options</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;default ipv6only=on&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>add_header</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_listen_option</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_cert</span>
      
      
        <span class='type'>(<tt>Optional[Variant[String, Boolean]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_client_cert</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_verify_client</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;on&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_dhparam</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::ssl_dhparam</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_redirect</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_redirect_port</span>
      
      
        <span class='type'>(<tt>Optional[Integer]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_key</span>
      
      
        <span class='type'>(<tt>Optional[Variant[String, Boolean]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_port</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>443</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_prefer_server_ciphers</span>
      
      
        <span class='type'>(<tt>Enum['on', 'off']</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::ssl_prefer_server_ciphers</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_protocols</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::ssl_protocols</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_buffer_size</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_ciphers</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::ssl_ciphers</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_cache</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;shared:SSL:10m&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_crl</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_stapling</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_stapling_file</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_stapling_responder</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_stapling_verify</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_session_timeout</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;5m&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_session_tickets</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_session_ticket_key</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>ssl_trusted_cert</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>spdy</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::spdy</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>http2</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::http2</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_redirect</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_read_timeout</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::proxy_read_timeout</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_connect_timeout</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::proxy_connect_timeout</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_set_header</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::proxy_set_header</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_hide_header</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::proxy_hide_header</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_pass_header</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::proxy_pass_header</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_cache</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_cache_key</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_cache_use_stale</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_cache_valid</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_cache_lock</span>
      
      
        <span class='type'>(<tt>Optional[Enum['on', 'off']]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_cache_bypass</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_method</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_http_version</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_set_body</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>proxy_buffering</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>resolver</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>fastcgi</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>fastcgi_index</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>fastcgi_param</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>fastcgi_params</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;${::nginx::conf_dir}/fastcgi.conf&quot;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>fastcgi_script</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>uwsgi</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>uwsgi_params</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&quot;${nginx::config::conf_dir}/uwsgi_params&quot;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>uwsgi_read_timeout</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>index_files</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[
    &#39;index.html&#39;,
    &#39;index.htm&#39;,
    &#39;index.php&#39;]</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>autoindex</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>server_name</span>
      
      
        <span class='type'>(<tt>Array[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[$name]</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>www_root</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>rewrite_www_to_non_www</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_custom_cfg</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_cfg_prepend</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_cfg_append</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_custom_cfg_prepend</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_custom_cfg_append</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>try_files</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>auth_basic</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>auth_basic_user_file</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>auth_request</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_body_timeout</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_header_timeout</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>client_max_body_size</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>raw_prepend</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>raw_append</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_raw_prepend</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>location_raw_append</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>server_cfg_prepend</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>server_cfg_append</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>server_cfg_ssl_prepend</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>server_cfg_ssl_append</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>include_files</span>
      
      
        <span class='type'>(<tt>Optional[Array[String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>access_log</span>
      
      
        <span class='type'>(<tt>Optional[Variant[String, Array]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>error_log</span>
      
      
        <span class='type'>(<tt>Optional[Variant[String, Array]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>format_log</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;combined&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>passenger_cgi_param</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>passenger_set_header</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>passenger_env_var</span>
      
      
        <span class='type'>(<tt>Optional[Hash]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>passenger_pre_start</span>
      
      
        <span class='type'>(<tt>Optional[Variant[Array[String], String]]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>log_by_lua</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>log_by_lua_file</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>use_default_location</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>rewrite_rules</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>[]</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>string_mappings</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>geo_mappings</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>gzip_types</span>
      
      
        <span class='type'>(<tt>Optional[String]</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>owner</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::global_owner</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>group</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::global_group</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>mode</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>$::nginx::global_mode</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>maintenance</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>maintenance_value</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>&#39;return 503&#39;</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>error_pages</span>
      
      
        <span class='type'>(<tt>Any</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>undef</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>locations</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
    <li>
      
        <span class='name'>locations_defaults</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>


</div><div class="method_details_list">
  <table class="source_code">
    <tr>
      <td>
        <pre class="lines">


139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378
379
380
381
382
383
384
385
386
387
388
389
390
391
392
393
394
395
396
397
398
399
400
401
402
403
404
405
406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425
426
427
428
429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461</pre>
      </td>
      <td>
        <pre class="code"><span class="info file"># File 'manifests/resource/server.pp', line 139</span>

define nginx::resource::server (
  Enum[&#39;absent&#39;, &#39;present&#39;] $ensure                                              = &#39;present&#39;,
  Variant[Array, String] $listen_ip                                              = &#39;*&#39;,
  Integer $listen_port                                                           = 80,
  Optional[String] $listen_options                                               = undef,
  Boolean $listen_unix_socket_enable                                             = false,
  Variant[Array[Stdlib::Absolutepath], Stdlib::Absolutepath] $listen_unix_socket = &#39;/var/run/nginx.sock&#39;,
  Optional[String] $listen_unix_socket_options                                   = undef,
  Optional[Enum[&#39;any&#39;, &#39;all&#39;]] $location_satisfy                                 = undef,
  Array $location_allow                                                          = [],
  Array $location_deny                                                           = [],
  Boolean $ipv6_enable                                                           = false,
  Variant[Array, String] $ipv6_listen_ip                                         = &#39;::&#39;,
  Integer $ipv6_listen_port                                                      = 80,
  String $ipv6_listen_options                                                    = &#39;default ipv6only=on&#39;,
  Optional[Hash] $add_header                                                     = undef,
  Boolean $ssl                                                                   = false,
  Boolean $ssl_listen_option                                                     = true,
  Optional[Variant[String, Boolean]] $ssl_cert                                   = undef,
  Optional[String] $ssl_client_cert                                              = undef,
  String $ssl_verify_client                                                      = &#39;on&#39;,
  Optional[String] $ssl_dhparam                                                  = $::nginx::ssl_dhparam,
  Boolean $ssl_redirect                                                          = false,
  Optional[Integer] $ssl_redirect_port                                           = undef,
  Optional[Variant[String, Boolean]] $ssl_key                                    = undef,
  Integer $ssl_port                                                              = 443,
  Enum[&#39;on&#39;, &#39;off&#39;] $ssl_prefer_server_ciphers                                   = $::nginx::ssl_prefer_server_ciphers,
  String $ssl_protocols                                                          = $::nginx::ssl_protocols,
  $ssl_buffer_size                                                               = undef,
  String $ssl_ciphers                                                            = $::nginx::ssl_ciphers,
  String $ssl_cache                                                              = &#39;shared:SSL:10m&#39;,
  Optional[String] $ssl_crl                                                      = undef,
  Boolean $ssl_stapling                                                          = false,
  Optional[String] $ssl_stapling_file                                            = undef,
  Optional[String] $ssl_stapling_responder                                       = undef,
  Boolean $ssl_stapling_verify                                                   = false,
  String $ssl_session_timeout                                                    = &#39;5m&#39;,
  Optional[String] $ssl_session_tickets                                          = undef,
  Optional[String] $ssl_session_ticket_key                                       = undef,
  Optional[String] $ssl_trusted_cert                                             = undef,
  String $spdy                                                                   = $::nginx::spdy,
  $http2                                                                         = $::nginx::http2,
  Optional[String] $proxy                                                        = undef,
  Optional[String]$proxy_redirect                                                = undef,
  String $proxy_read_timeout                                                     = $::nginx::proxy_read_timeout,
  $proxy_connect_timeout                                                         = $::nginx::proxy_connect_timeout,
  Array[String] $proxy_set_header                                                = $::nginx::proxy_set_header,
  Array[String] $proxy_hide_header                                               = $::nginx::proxy_hide_header,
  Array[String] $proxy_pass_header                                               = $::nginx::proxy_pass_header,
  Optional[String] $proxy_cache                                                  = undef,
  Optional[String] $proxy_cache_key                                              = undef,
  Optional[String] $proxy_cache_use_stale                                        = undef,
  Optional[Variant[Array[String], String]] $proxy_cache_valid                    = undef,
  Optional[Enum[&#39;on&#39;, &#39;off&#39;]] $proxy_cache_lock                                  = undef,
  Optional[Variant[Array[String], String]] $proxy_cache_bypass                   = undef,
  Optional[String] $proxy_method                                                 = undef,
  Optional[String] $proxy_http_version                                           = undef,
  Optional[String] $proxy_set_body                                               = undef,
  Optional[String] $proxy_buffering                                              = undef,
  Array $resolver                                                                = [],
  Optional[String] $fastcgi                                                      = undef,
  Optional[String] $fastcgi_index                                                = undef,
  $fastcgi_param                                                                 = undef,
  String $fastcgi_params                                                         = &quot;${::nginx::conf_dir}/fastcgi.conf&quot;,
  Optional[String] $fastcgi_script                                               = undef,
  Optional[String] $uwsgi                                                        = undef,
  String $uwsgi_params                                                           = &quot;${nginx::config::conf_dir}/uwsgi_params&quot;,
  Optional[String] $uwsgi_read_timeout                                           = undef,
  Array $index_files                                                             = [
    &#39;index.html&#39;,
    &#39;index.htm&#39;,
    &#39;index.php&#39;],
  Optional[String] $autoindex                                                    = undef,
  Array[String] $server_name                                                     = [$name],
  Optional[String] $www_root                                                     = undef,
  Boolean $rewrite_www_to_non_www                                                = false,
  Optional[Hash] $location_custom_cfg                                            = undef,
  Optional[Hash] $location_cfg_prepend                                           = undef,
  Optional[Hash] $location_cfg_append                                            = undef,
  Optional[Hash] $location_custom_cfg_prepend                                    = undef,
  Optional[Hash] $location_custom_cfg_append                                     = undef,
  Optional[Array[String]] $try_files                                             = undef,
  Optional[String] $auth_basic                                                   = undef,
  Optional[String] $auth_basic_user_file                                         = undef,
  Optional[String] $auth_request                                                 = undef,
  Optional[String] $client_body_timeout                                          = undef,
  Optional[String] $client_header_timeout                                        = undef,
  $client_max_body_size                                                          = undef,
  Optional[Variant[Array[String], String]] $raw_prepend                          = undef,
  Optional[Variant[Array[String], String]] $raw_append                           = undef,
  Optional[Variant[Array[String], String]] $location_raw_prepend                 = undef,
  Optional[Variant[Array[String], String]] $location_raw_append                  = undef,
  Optional[Hash] $server_cfg_prepend                                             = undef,
  Optional[Hash] $server_cfg_append                                              = undef,
  Optional[Hash] $server_cfg_ssl_prepend                                         = undef,
  Optional[Hash] $server_cfg_ssl_append                                          = undef,
  Optional[Array[String]] $include_files                                         = undef,
  Optional[Variant[String, Array]] $access_log                                   = undef,
  Optional[Variant[String, Array]] $error_log                                    = undef,
  $format_log                                                                    = &#39;combined&#39;,
  Optional[Hash] $passenger_cgi_param                                            = undef,
  Optional[Hash] $passenger_set_header                                           = undef,
  Optional[Hash] $passenger_env_var                                              = undef,
  Optional[Variant[Array[String], String]] $passenger_pre_start                  = undef,
  Optional[String] $log_by_lua                                                   = undef,
  Optional[String] $log_by_lua_file                                              = undef,
  $use_default_location                                                          = true,
  $rewrite_rules                                                                 = [],
  $string_mappings                                                               = {},
  $geo_mappings                                                                  = {},
  Optional[String] $gzip_types                                                   = undef,
  String $owner                                                                  = $::nginx::global_owner,
  String $group                                                                  = $::nginx::global_group,
  String $mode                                                                   = $::nginx::global_mode,
  Boolean $maintenance                                                           = false,
  String $maintenance_value                                                      = &#39;return 503&#39;,
  $error_pages                                                                   = undef,
  Hash $locations                                                                = {},
  Hash $locations_defaults                                                       = {}
) {

  if ! defined(Class[&#39;nginx&#39;]) {
    fail(&#39;You must include the nginx base class before using any defined resources&#39;)
  }

  # Variables
  if $::nginx::confd_only {
    $server_dir = &quot;${::nginx::conf_dir}/conf.d&quot;
  } else {
    $server_dir = &quot;${::nginx::conf_dir}/sites-available&quot;
    $server_enable_dir = &quot;${::nginx::conf_dir}/sites-enabled&quot;
    $server_symlink_ensure = $ensure ? {
      &#39;absent&#39; =&gt; absent,
      default  =&gt; &#39;link&#39;,
    }
  }

  $name_sanitized = regsubst($name, &#39; &#39;, &#39;_&#39;, &#39;G&#39;)
  $config_file = &quot;${server_dir}/${name_sanitized}.conf&quot;

  File {
    ensure =&gt; $ensure ? {
      &#39;absent&#39; =&gt; absent,
      default  =&gt; &#39;file&#39;,
    },
    notify =&gt; Class[&#39;::nginx::service&#39;],
    owner  =&gt; $owner,
    group  =&gt; $group,
    mode   =&gt; $mode,
  }

  # Add IPv6 Logic Check - Nginx service will not start if ipv6 is enabled
  # and support does not exist for it in the kernel.
  if $ipv6_enable and !$ipv6_listen_ip {
    warning(&#39;nginx: IPv6 support is not enabled or configured properly&#39;)
  }

  # Check to see if SSL Certificates are properly defined.
  if $ssl {
    if $ssl_cert == undef {
      fail(&#39;nginx: ssl_cert must be set to false or to a fully qualified path&#39;)
    }
    if $ssl_key == undef {
      fail(&#39;nginx: ssl_key must be set to false or to a fully qualified path&#39;)
    }
  }

  # Try to error in the case where the user sets ssl_port == listen_port but
  # doesn&#39;t set ssl = true
  if !$ssl and $ssl_port == $listen_port {
    warning(&#39;nginx: ssl must be true if listen_port is the same as ssl_port&#39;)
  }

  concat { $config_file:
    ensure  =&gt; $ensure,
    owner   =&gt; $owner,
    group   =&gt; $group,
    mode    =&gt; $mode,
    notify  =&gt; Class[&#39;::nginx::service&#39;],
    require =&gt; File[$server_dir],
  }

  # This deals with a situation where the listen directive for SSL doesn&#39;t match
  # the port we want to force the SSL redirect to.
  if $ssl_redirect_port {
    $_ssl_redirect_port = $ssl_redirect_port
  } elsif $ssl_port {
    $_ssl_redirect_port = $ssl_port
  }

  # Suppress unneeded stuff in non-SSL location block when certain conditions are
  # met.
  $ssl_only = ($ssl and $ssl_port == $listen_port) or $ssl_redirect

  # If we&#39;re redirecting to SSL, the default location block is useless, *unless*
  # SSL is enabled for this server
  # either       and    ssl -&gt; true
  # ssl redirect and no ssl -&gt; false
  if (!$ssl_redirect or $ssl) and $use_default_location {
    # Create the default location reference for the server
    nginx::resource::location {&quot;${name_sanitized}-default&quot;:
      ensure                      =&gt; $ensure,
      server                      =&gt; $name_sanitized,
      ssl                         =&gt; $ssl,
      ssl_only                    =&gt; $ssl_only,
      location                    =&gt; &#39;/&#39;,
      location_satisfy            =&gt; $location_satisfy,
      location_allow              =&gt; $location_allow,
      location_deny               =&gt; $location_deny,
      proxy                       =&gt; $proxy,
      proxy_redirect              =&gt; $proxy_redirect,
      proxy_read_timeout          =&gt; $proxy_read_timeout,
      proxy_connect_timeout       =&gt; $proxy_connect_timeout,
      proxy_cache                 =&gt; $proxy_cache,
      proxy_cache_key             =&gt; $proxy_cache_key,
      proxy_cache_use_stale       =&gt; $proxy_cache_use_stale,
      proxy_cache_valid           =&gt; $proxy_cache_valid,
      proxy_method                =&gt; $proxy_method,
      proxy_http_version          =&gt; $proxy_http_version,
      proxy_set_header            =&gt; $proxy_set_header,
      proxy_hide_header           =&gt; $proxy_hide_header,
      proxy_pass_header           =&gt; $proxy_pass_header,
      proxy_cache_lock            =&gt; $proxy_cache_lock,
      proxy_set_body              =&gt; $proxy_set_body,
      proxy_cache_bypass          =&gt; $proxy_cache_bypass,
      proxy_buffering             =&gt; $proxy_buffering,
      fastcgi                     =&gt; $fastcgi,
      fastcgi_index               =&gt; $fastcgi_index,
      fastcgi_param               =&gt; $fastcgi_param,
      fastcgi_params              =&gt; $fastcgi_params,
      fastcgi_script              =&gt; $fastcgi_script,
      uwsgi                       =&gt; $uwsgi,
      uwsgi_params                =&gt; $uwsgi_params,
      uwsgi_read_timeout          =&gt; $uwsgi_read_timeout,
      try_files                   =&gt; $try_files,
      www_root                    =&gt; $www_root,
      autoindex                   =&gt; $autoindex,
      index_files                 =&gt; $index_files,
      location_custom_cfg         =&gt; $location_custom_cfg,
      location_cfg_prepend        =&gt; $location_cfg_prepend,
      location_cfg_append         =&gt; $location_cfg_append,
      location_custom_cfg_prepend =&gt; $location_custom_cfg_prepend,
      location_custom_cfg_append  =&gt; $location_custom_cfg_append,
      rewrite_rules               =&gt; $rewrite_rules,
      raw_prepend                 =&gt; $location_raw_prepend,
      raw_append                  =&gt; $location_raw_append,
      notify                      =&gt; Class[&#39;nginx::service&#39;],
    }
    $root = undef
  } else {
    $root = $www_root
  }

  # Only try to manage these files if they&#39;re the default one (as you presumably
  # usually don&#39;t want the default template if you&#39;re using a custom file.

  if $fastcgi != undef and !defined(File[$fastcgi_params]) and $fastcgi_params == &quot;${::nginx::conf_dir}/fastcgi.conf&quot; {
    file { $fastcgi_params:
      ensure  =&gt; present,
      mode    =&gt; &#39;0644&#39;,
      content =&gt; template(&#39;nginx/server/fastcgi.conf.erb&#39;),
    }
  }

  if $uwsgi != undef and !defined(File[$uwsgi_params]) and $uwsgi_params == &quot;${::nginx::conf_dir}/uwsgi_params&quot; {
    file { $uwsgi_params:
      ensure  =&gt; present,
      mode    =&gt; &#39;0644&#39;,
      content =&gt; template(&#39;nginx/server/uwsgi_params.erb&#39;),
    }
  }

  if $listen_port != $ssl_port {
    concat::fragment { &quot;${name_sanitized}-header&quot;:
      target  =&gt; $config_file,
      content =&gt; template(&#39;nginx/server/server_header.erb&#39;),
      order   =&gt; &#39;001&#39;,
    }

    # Create a proper file close stub.
    concat::fragment { &quot;${name_sanitized}-footer&quot;:
      target  =&gt; $config_file,
      content =&gt; template(&#39;nginx/server/server_footer.erb&#39;),
      order   =&gt; &#39;699&#39;,
    }
  }

  # Create SSL File Stubs if SSL is enabled
  if $ssl {
    # Access and error logs are named differently in ssl template

    concat::fragment { &quot;${name_sanitized}-ssl-header&quot;:
      target  =&gt; $config_file,
      content =&gt; template(&#39;nginx/server/server_ssl_header.erb&#39;),
      order   =&gt; &#39;700&#39;,
    }
    concat::fragment { &quot;${name_sanitized}-ssl-footer&quot;:
      target  =&gt; $config_file,
      content =&gt; template(&#39;nginx/server/server_ssl_footer.erb&#39;),
      order   =&gt; &#39;999&#39;,
    }
  }

  unless $::nginx::confd_only {
    file{ &quot;${name_sanitized}.conf symlink&quot;:
      ensure  =&gt; $server_symlink_ensure,
      path    =&gt; &quot;${server_enable_dir}/${name_sanitized}.conf&quot;,
      target  =&gt; $config_file,
      require =&gt; [File[$server_dir], Concat[$config_file]],
      notify  =&gt; Class[&#39;::nginx::service&#39;],
    }
  }

  create_resources(&#39;::nginx::resource::map&#39;, $string_mappings)
  create_resources(&#39;::nginx::resource::geo&#39;, $geo_mappings)
  create_resources(&#39;::nginx::resource::location&#39;, $locations, {
    ensure   =&gt; $ensure,
    server   =&gt; $name_sanitized,
    ssl      =&gt; $ssl,
    ssl_only =&gt; $ssl_only,
    www_root =&gt; $www_root,
  } + $locations_defaults)
}</pre>
      </td>
    </tr>
  </table>
</div>
</div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>